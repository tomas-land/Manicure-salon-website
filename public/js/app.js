jQuery.datetimepicker.setLocale("lt"),$(".datetimepicker").datetimepicker({step:15}),$(document).ready((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var e=$("#calendar").fullCalendar({displayEventEnd:!0,editable:!0,selectable:!0,allDaySlot:!1,defaultView:"agendaWeek",height:"auto",minTime:"07:00:00",maxTime:"23:00:00",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},locale:"lt",events:"calendar",eventRender:function(e,a){a.find(".fc-content").append(e.name),a.find(".fc-content").append("<br>"+e.service),a.find(".fc-content").css("background-color",e.color),a.find(".fc-bg").css("background-color",e.color),a.find(".fc-time").css("font-weight","500"),jQuery(".fc-prev-button").attr("class",""),jQuery(".fc-next-button").attr("class",""),jQuery(".fc-today-button").attr("class","fc-today-button"),jQuery(".fc-month-button").removeClass("fc-state-default"),jQuery(".fc-agendaWeek-button").removeClass("fc-state-default"),jQuery(".fc-agendaDay-button").removeClass("fc-state-default")},selectHelper:!0,select:function(a,t,n){$("#mymodal").modal("show");a=$.fullCalendar.formatDate(a,"Y-MM-DD HH:mm:ss"),t=$.fullCalendar.formatDate(t,"Y-MM-DD HH:mm:ss");$("#calendar-modal-start").val(a),$("#calendar-modal-end").val(t),$("#myform").submit((function(a){var t=$("#calendar-modal-id").val(),n=$("#calendar-modal-id option:selected").text(),l=$("#calendar-modal-select").val(),r=$("#calendar-modal-price").val(),c=$("#calendar-modal-start").val(),d=$("#calendar-modal-end").val(),i=$("#calendar-modal-role").val();if($("input[name='color']").is(":checked"))var s=$('input[name="color"]:checked').val();a.preventDefault(),$.ajax({url:"calendar/action",type:"POST",data:{client_id:t,name:n,service:l,price:r,start:c,end:d,role:i,color:s,type:"add"},success:function(a){e.fullCalendar("refetchEvents")}}),$("#myform").trigger("reset"),$("#mymodal").modal("hide")}))},eventResize:function(a,t){var n=$.fullCalendar.formatDate(a.start,"Y-MM-DD HH:mm:ss"),l=$.fullCalendar.formatDate(a.end,"Y-MM-DD HH:mm:ss"),r=a.id,c=a.name,d=a.service,i=a.price;$.ajax({url:"calendar/action",type:"POST",data:{id:r,name:c,service:d,price:i,start:n,end:l,type:"update"},success:function(a){e.fullCalendar("refetchEvents"),alert("Vizito laikas sėkmingai pakeistas")}})},eventDrop:function(a,t){var n=$.fullCalendar.formatDate(a.start,"Y-MM-DD HH:mm:ss"),l=$.fullCalendar.formatDate(a.end,"Y-MM-DD HH:mm:ss"),r=a.id,c=a.name,d=a.service,i=a.price;$.ajax({url:"calendar/action",type:"POST",data:{id:r,name:c,service:d,price:i,start:n,end:l,type:"update"},success:function(a){e.fullCalendar("refetchEvents"),alert("Vizitas perkeltas sėkmingai")}})},eventClick:function(a){if(confirm("Ar tikrai norite ištrintį šį vizitą ?")){var t=a.id;$.ajax({url:"calendar/action",type:"POST",data:{id:t,type:"delete"},success:function(a){e.fullCalendar("refetchEvents"),alert("Vizitas ištrintas sėkmingai")}})}}})}));
